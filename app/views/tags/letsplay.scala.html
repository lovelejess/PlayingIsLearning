
<link rel="stylesheet" media="screen" href='@routes.Assets.at("stylesheets/letsplay.css")'>
<link rel="stylesheet" media="screen" href='@routes.Assets.at("stylesheets/blueimp-gallery.min.css")'>

<div id="readySetPLAY">
    <div id="title">
        <h2> Ready, Set, PLAY! </h2>
    </div>
    <div id="instruct">
        <p> To start playing, select the age group and deck you would like to play with.</p>
    </div>
    <div id="selection">
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-2"></div>
            <div class="col-md-2">
                <div class="form-group">
                    <label for="deck"></label>
                    <select id="deck" name="deck" class="form-control">
                     <option class="blank" value=""> Select Deck </option>
                        <option> ICM Museum Deck 1 </option>
                        <option> ICM Museum Deck 2 </option>
                    </select>  
                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <label for="age"></label>
                    <select id="age" name="age" class="form-control">
                     <option class="blank" value=""> Select Age Group </option>
                        <option> 0-3 </option>
                        <option> 3+</option>
                    </select>  
                </div>
            </div> 
            <div class="col-md-2">
                <a class="btn btn-lg btn-default" onclick="deckSelected();ageSelected();">Play!</a>
            </div>
            <div class="col-md-2"></div>
        </div> <!-- /row -->               
    </div> <!-- /container -->

    <br>

    <div id="deckSelection">
        <h4> You are playing with the <b id="selectedDeck"> -deck-  </b> deck for ages <b id="selectedAge"> -age-</b></h4>
        <br>
    </div>
    <div  id="deckSelection" ng:app="ShuffleModule">
    <div ng-controller="ShuffleController">
        <a class="btn btn-lg btn-default" ng-click="useDeck()"><b>Shuffle!</b></a>
            <div ng-repeat=" card in array | shuffle | limitTo:1">
                <br>
                <div id='links1' class="is-visible" data-toggle="modal-gallery" data-target="#modal-gallery">
                    <a href={{card.small}} title={{card.name}} data-gallery="gallery" rel='gallery'>{{card.name}}</a>
                    <a style="display: none;" href={{card.small}} title={{card.name}}data-gallery="gallery" rel='gallery'> </a>
                </div>
            </div>
    </div>
</div>


    
</div> <!-- /readSetPLAY -->


<script type="text/javascript">

    function deckSelected(){
        var deck = document.getElementById('deck').value;
        document.getElementById('selectedDeck').innerHTML = deck;
     }

     function ageSelected(){
        var deck = document.getElementById('age').value;
        document.getElementById('selectedAge').innerHTML = deck;
     }

/* Fisher Yates Shuffle Algorithm 
   http://bost.ocks.org/mike/shuffle/
*/

var shufflemodule = angular.module('ShuffleModule', []);

shufflemodule.filter('shuffle', function() {
    return function(k) {
        for(var j, x, i = k.length; i; j = parseInt(Math.random() * i), x = k[--i], k[i] = k[j], k[j] = x);
        
        return k;
    };
});

function ShuffleController($scope) {
    var icmDeck = [
        { name: 'Train Room',
                small:'@routes.Assets.at("images/cards/Cards-29-03.png")'}, 
        { name: 'Bodies In Motion', 
                small:'@routes.Assets.at("images/cards/Cards-21-03.png")'}, 
        { name: 'Wind Tunnel', 
                small:'@routes.Assets.at("images/cards/Cards-59-03.png")'}, 
        { name: 'Post Office',
                small:'@routes.Assets.at("images/cards/Cards-53-03.png")'},
        { name: 'ABC Forest',
                small:'@routes.Assets.at("images/cards/Cards-05-03.png")'},
        { name: 'Art Room', 
                small:'@routes.Assets.at("images/cards/Cards-13-03.png")'},
        { name: 'Bank',
                small:'@routes.Assets.at("images/cards/Cards-33-03.png")'},
        { name: 'Theatre',
                small:'@routes.Assets.at("images/cards/Cards-49-03.png")'} 
    ];
    var icmKeys = ['Train Room','Bodies In Motion','Wind Tunnel','Post Office','ABC Forest','Art Room','Bank','Theatre']

    $scope.array = icmDeck;
    
    $scope.useDeck = function() { $scope.array = icmDeck; };
}

</script>